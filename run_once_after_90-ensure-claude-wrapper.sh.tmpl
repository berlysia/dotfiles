#!/bin/bash
# Ensure claude wrapper exists even if chezmoi apply fails

set -euo pipefail

# Create the bin directory if it doesn't exist
mkdir -p "$HOME/.local/bin"

# Create the claude wrapper script
cat > "$HOME/.local/bin/claude" << 'EOF'
#!/bin/bash
# Wrapper script for claude command
# Finds and executes the actual claude binary

if [ -x "$HOME/.claude/local/claude" ]; then
    exec "$HOME/.claude/local/claude" "$@"
else
    # Fallback to PATH lookup
    exec claude "$@"
fi
EOF

# Make it executable
chmod +x "$HOME/.local/bin/claude"
