# Common environment variables for all shells

# XDG Base Directory specification
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"

# Default editor
if type code >/dev/null 2>&1; then
  EDITOR="code --wait"
elif type emacs >/dev/null 2>&1; then
  EDITOR=emacs
fi
export EDITOR

# FZF configuration
export FZF_DEFAULT_OPTS="--height=50% --layout=reverse --info=inline --border --padding=1"

# Go configuration
export GOPATH="${GOPATH:-$HOME/go}"

# Prevent installation of mise-managed tools via Homebrew
# These tools are managed by mise and should not be installed via Homebrew
# The list is automatically generated from `mise ls` during chezmoi apply
{{- $miseTools := output "sh" "-c" "mise ls 2>/dev/null | awk '{print $1}' | sed 's/:.*//g' | sort -u | tr '\n' ' ' | sed 's/ $//' || echo ''" | trim }}
{{- if $miseTools }}
export HOMEBREW_FORBIDDEN_FORMULAE="{{ $miseTools }}"
{{- end }}

# Claude Code configuration
# Computer name for notifications/TTS (auto-detected from hostname)
export CLAUDE_COMPUTER_NAME="{{ .chezmoi.hostname }}"

# Machine-specific settings (not tracked in git)
# Create ~/local.env.sh to override settings above, e.g.:
#   export CLAUDE_COMPUTER_NAME="My Custom Name"
if [ -f ~/local.env.sh ]; then
  . ~/local.env.sh
fi
