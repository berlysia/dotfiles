---
name: validate-plan
description: Review completed implementation plan for logical consistency, completeness, and best practices. Use after exiting plan mode. Invokes logic-validator and optionally external review agents. Trigger keywords:"validate plan", "review plan", "check plan quality", "plan validation".
context: fork
agent: general-purpose
allowed-tools: Read, Bash, Task, Edit
disable-model-invocation: true
model: opus
---

# Plan Validation Skill

Planãƒ¢ãƒ¼ãƒ‰ã§ä½œæˆã—ãŸå®Ÿè£…è¨ˆç”»ã‚’ã€ExitPlanModeå®Ÿè¡Œå¾Œã«ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ã£ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€å¿…è¦ã«å¿œã˜ã¦æ”¹å–„ã™ã‚‹ã€‚

## é‡è¦ãªå‰æ

**ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ExitPlanModeå®Ÿè¡Œ**å¾Œ**ã€å®Ÿè£…é–‹å§‹å‰

Plan Modeä¸­ã¯ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ã«åˆ¶é™ãŒã‚ã‚‹ãŸã‚ã€ã“ã®ã‚¹ã‚­ãƒ«ã¯Plan Modeã‚’çµ‚äº†ã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

## åŸºæœ¬ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
1. Plan Mode ã§è¨ˆç”»ä½œæˆ
2. ExitPlanMode å®Ÿè¡Œ
3. /validate-plan å®Ÿè¡Œï¼ˆã“ã®ã‚¹ã‚­ãƒ«ï¼‰
   â”œâ”€ logic-validator ã§è«–ç†æ¤œè¨¼
   â””â”€ å¿…è¦ãªã‚‰å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼
4. æ¤œè¨¼çµæœã«å¿œã˜ãŸåˆ¤å®š:
   â”œâ”€ å•é¡Œãªã—/è»½å¾® â†’ 5ã¸
   â”œâ”€ ä¸­ç¨‹åº¦ï¼ˆä¿®æ­£å¯èƒ½ï¼‰ â†’ ä¿®æ­£ã—ã¦å†æ¤œè¨¼ï¼ˆæœ€å¤§2å›ï¼‰
   â””â”€ æ±ºå®šçš„ãªæ¬ è½ â†’ å®Ÿè£…åœæ­¢ã€è¨ˆç”»å†ä½œæˆ
5. å®Ÿè£…é–‹å§‹ï¼ˆå•é¡Œãªã—ã®å ´åˆã®ã¿ï¼‰
```

**é‡è¦ãªåŸå‰‡**: æ±ºå®šçš„ãªæ¬ è½ãŒã‚ã‚‹çŠ¶æ…‹ã§ã¯ã€çµ¶å¯¾ã«å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã›ã‚“ã€‚

## Validation Steps

### Step 1: è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

å‰å›ã®Plan Modeã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä½œæˆã•ã‚ŒãŸè¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®šï¼š

```bash
# settings.jsonã® plansDirectory è¨­å®šã«å¿œã˜ãŸå ´æ‰€ã‚’ç¢ºèª
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ~/.claude/plans/ ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® .claude/plans/

ls -lt ~/.claude/plans/*.md 2>/dev/null | head -5
# ã¾ãŸã¯
ls -lt .claude/plans/*.md 2>/dev/null | head -5
```

**è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€**:
- ã‚°ãƒ­ãƒ¼ãƒãƒ«: `~/.claude/plans/`
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: `.claude/plans/`
- settings.jsonã® `plansDirectory` ã§è¨­å®šå¤‰æ›´å¯èƒ½

**è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ**:
- Plan Modeã§æ˜ç¤ºçš„ã«ä¿å­˜ã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- ä¼šè©±å±¥æ­´ã‹ã‚‰è¨ˆç”»å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ãã ã•ã„
- è©³ç´°ã¯ [troubleshooting.md](troubleshooting.md#è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„) ã‚’å‚ç…§

è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿å–ã‚Šï¼š

```typescript
Read({ file_path: "~/.claude/plans/plan-name.md" })
```

### Step 2: è«–ç†çš„æ•´åˆæ€§æ¤œè¨¼ï¼ˆå¿…é ˆï¼‰

logic-validatorã§è¨ˆç”»ã®è«–ç†çš„æ•´åˆæ€§ã‚’æ¤œè¨¼ï¼š

```typescript
Task({
  subagent_type: "logic-validator",
  description: "Validate plan logic",
  prompt: `
# å®Ÿè£…è¨ˆç”»ã®è«–ç†çš„æ•´åˆæ€§æ¤œè¨¼

[è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘]

## æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ
1. å„ã‚¹ãƒ†ãƒƒãƒ—ã®ç›®çš„ã¨ä¾å­˜é–¢ä¿‚ã¯æ˜ç¢ºã‹
2. æ¤œè¨¼ãªã—ã«æˆåŠŸã‚’ä»®å®šã—ã¦ã„ãªã„ã‹
3. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ»å¤±æ•—ã‚·ãƒŠãƒªã‚ªã¯è€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
4. å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªã‚¹ãƒ†ãƒƒãƒ—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹
5. æ ¹æœ¬åŸå› åˆ†æãªã—ã«ç—‡çŠ¶çš„ä¿®æ­£ã‚’ææ¡ˆã—ã¦ã„ãªã„ã‹

## å‚è€ƒãƒ«ãƒ¼ãƒ«
CLAUDE.md ã®ãƒ‡ãƒãƒƒã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã‚¿ã‚¹ã‚¯å®Œäº†ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ç…§ã‚‰ã—ã¦è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
`
})
```

### Step 3: å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

è¨ˆç”»ã®è¤‡é›‘ã•ã«å¿œã˜ã¦å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¿½åŠ ï¼š

| è¨ˆç”»ã®ç¨®é¡ | æ¨å¥¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ | ç†ç”± |
|-----------|------------|------|
| è¤‡é›‘ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | `/codex-review` | è¨­è¨ˆãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•è©•ä¾¡ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ | `/self-review` | å¤šè§’çš„è©•ä¾¡ |
| æ–°æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ | codex-review-mcp | ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ç¢ºèª |
| å˜ç´”ãªä¿®æ­£ | ä¸è¦ | logic-validatorã®ã¿ã§ååˆ† |

**ä½¿ç”¨ä¾‹:**

```bash
# codex-reviewä½¿ç”¨
/codex-review

# ç›¸è«‡å†…å®¹
ã€Œä»¥ä¸‹ã®å®Ÿè£…è¨ˆç”»ã«ã¤ã„ã¦ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¦³ç‚¹ã‹ã‚‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚
ç‰¹ã«ã€[å…·ä½“çš„ãªæ‡¸å¿µç‚¹]ã«ã¤ã„ã¦è©•ä¾¡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

[è¨ˆç”»ã®è¦ç´„]ã€
```

### Step 4: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è©•ä¾¡ã¨æ”¹å–„åˆ¤æ–­

æ¤œè¨¼çµæœã‚’è©•ä¾¡ã—ã€å¿…è¦ãªæ”¹å–„ã‚’å®Ÿæ–½ã€‚

**é‡è¦**: ã“ã®ã‚¹ã‚­ãƒ«ã¯æœ€å¤§2å›ã®æ¤œè¨¼ã‚µã‚¤ã‚¯ãƒ«ã§å®Œäº†ã—ã¦ãã ã•ã„ã€‚
- **1å›ç›®**: åˆå›æ¤œè¨¼ â†’ é‡å¤§ãªå•é¡Œã‚’ä¿®æ­£
- **2å›ç›®**: å†æ¤œè¨¼ â†’ OK/è»½å¾®ãªå•é¡Œã®ã¿ â†’ å®Ÿè£…é–‹å§‹

3å›ç›®ä»¥é™ã®æ¤œè¨¼ã¯é¿ã‘ã€70-85ç‚¹ã®è¨ˆç”»ã§å®Ÿè£…ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚å®Œç’§ã‚’æ±‚ã‚ã™ããªã„ã“ã¨ãŒé‡è¦ã§ã™ã€‚

#### å„ªå…ˆåº¦ã®åˆ¤æ–­

| æŒ‡æ‘˜ã‚¿ã‚¤ãƒ— | é‡å¤§åº¦ | åˆ¤æ–­ | å¯¾å¿œä¾‹ |
|---------|------|------|--------|
| è«–ç†çŸ›ç›¾ï¼ˆå®Ÿè¡Œä¸å¯èƒ½ï¼‰ | ğŸš« æ±ºå®šçš„ | å®Ÿè£…åœæ­¢ | ã€Œã‚¹ãƒ†ãƒƒãƒ—Aã®å‰ææ¡ä»¶ãŒã‚¹ãƒ†ãƒƒãƒ—Bã§ç ´å£Šã•ã‚Œã‚‹ã€â†’ è¨ˆç”»å†ä½œæˆ |
| å¿…é ˆæ¤œè¨¼ã®å®Œå…¨æ¬ è½ | ğŸš« æ±ºå®šçš„ | å®Ÿè£…åœæ­¢ | ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤‰æ›´å¾Œã®æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ãŒãªã„ã€â†’ è¨ˆç”»å†ä½œæˆ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ | ğŸš« æ±ºå®šçš„ | å®Ÿè£…åœæ­¢ | ã€Œèªè¨¼ãªã—ã§ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã€â†’ è¨ˆç”»å†ä½œæˆ |
| æ ¹æœ¬åŸå› åˆ†æãªã—ã®ç—‡çŠ¶çš„ä¿®æ­£ | ğŸš« æ±ºå®šçš„ | å®Ÿè£…åœæ­¢ | ã€Œã‚¨ãƒ©ãƒ¼ã®åŸå› ä¸æ˜ã ãŒè¨­å®šå¤‰æ›´ã€â†’ åŸå› èª¿æŸ»ã‹ã‚‰å†è¨ˆç”» |
| æ¤œè¨¼æ¼ã‚Œï¼ˆè¿½åŠ å¯èƒ½ï¼‰ | âš ï¸ ä¸­ç¨‹åº¦ | ä¿®æ­£ã—ã¦å¯¾å¿œ | ã€Œãƒ†ã‚¹ãƒˆãŒä¸è¶³ã€â†’ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ  |
| è»½å¾®ãªè«–ç†çŸ›ç›¾ | âš ï¸ ä¸­ç¨‹åº¦ | ä¿®æ­£ã—ã¦å¯¾å¿œ | ã€Œã‚¹ãƒ†ãƒƒãƒ—é †åºãŒéåŠ¹ç‡ã€â†’ é †åºå¤‰æ›´ |
| ä»£æ›¿æ¡ˆæç¤º | âœ… è»½å¾® | æ¤œè¨ | ã‚ˆã‚Šå˜ç´”ãªå®Ÿè£… â†’ æ—¢å­˜è¨ˆç”»ã¨æ¯”è¼ƒ |
| è¿½åŠ æ©Ÿèƒ½ææ¡ˆ | âœ… è»½å¾® | æ¤œè¨ | ã‚¹ã‚³ãƒ¼ãƒ—å¤– â†’ é™¤å¤–ã®åˆ¤æ–­ã¯è‡ªåˆ†ã§ |
| éåº¦ã«ä¿å®ˆçš„ | âœ… è»½å¾® | ç„¡è¦–å¯ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¶ç´„ã¨çŸ›ç›¾ã™ã‚‹å ´åˆ |

#### è¨ˆç”»ã®æ›´æ–°

å•é¡Œã®é‡å¤§åº¦ã«å¿œã˜ã¦å¯¾å¿œï¼š

**è»½å¾®ï½ä¸­ç¨‹åº¦ã®å•é¡Œ**:
```typescript
Edit({
  file_path: "/path/to/plan.md",
  old_string: "å…ƒã®ã‚¹ãƒ†ãƒƒãƒ—è¨˜è¿°",
  new_string: "æ”¹å–„ã•ã‚ŒãŸã‚¹ãƒ†ãƒƒãƒ—è¨˜è¿°ï¼ˆæ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆè¿½åŠ ç­‰ï¼‰"
})
```

ä¿®æ­£å¾Œã€Step 2ã«æˆ»ã£ã¦å†æ¤œè¨¼ï¼ˆãŸã ã—æœ€å¤§2å›ã¾ã§ï¼‰ã€‚

**æ±ºå®šçš„ãªæ¬ è½ãƒ»é‡å¤§ãªè«–ç†çŸ›ç›¾**:
- è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®éƒ¨åˆ†çš„ãªä¿®æ­£ã§ã¯ä¸ååˆ†
- **å®Ÿè£…ã‚’åœæ­¢**ã—ã€Step 5ã®ã€Œæ±ºå®šçš„ãªæ¬ è½ã€ã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„
- æ–°ã—ã„Plan Modeã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®è¨ˆç”»å†ä½œæˆã‚’æ¨å¥¨

### Step 5: åˆ¤å®šã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

æ¤œè¨¼çµæœã«åŸºã¥ã„ã¦ã€æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ±ºå®šï¼š

#### âœ… å•é¡Œãªã—ã€ã¾ãŸã¯è»½å¾®ãªå•é¡Œã®ã¿

**å®Ÿè£…ã‚’é–‹å§‹ã—ã¦OK**

è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã™ã§ã« `~/.claude/plans/` ã¾ãŸã¯ `.claude/plans/` ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

#### âš ï¸ ä¸­ç¨‹åº¦ã®å•é¡Œï¼ˆ2å›ç›®ã®æ¤œè¨¼å¾Œã‚‚æ®‹ã‚‹ï¼‰

**åˆ¤æ–­ãŒå¿…è¦**
- å•é¡Œã‚’å—å®¹ã—ã¦å®Ÿè£…é–‹å§‹ã™ã‚‹ã‹
- è¨ˆç”»ã‚’å†ä½œæˆã™ã‚‹ã‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç›¸è«‡ã—ã¦æ±ºå®šã—ã¦ãã ã•ã„ã€‚

#### ğŸš« æ±ºå®šçš„ãªæ¬ è½ãƒ»é‡å¤§ãªè«–ç†çŸ›ç›¾

**å®Ÿè£…ã‚’åœæ­¢ã—ã¦ãã ã•ã„**

ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å®Ÿè¡Œï¼š
1. **è¨ˆç”»ã‚’å…¨é¢çš„ã«å†æ¤œè¨**: æ–°ã—ã„Plan Modeã‚»ãƒƒã‚·ãƒ§ãƒ³ã§è¨ˆç”»ã‚’ä½œã‚Šç›´ã™
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Š**: é‡å¤§ãªå•é¡Œã‚’èª¬æ˜ã—ã€æ–¹é‡ã‚’ç›¸è«‡

**æ±ºå®šçš„ãªæ¬ è½ã®ä¾‹**:
- å¿…é ˆã®æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ãŒå®Œå…¨ã«æ¬ ã‘ã¦ã„ã‚‹
- è«–ç†çš„ã«å®Ÿè¡Œä¸å¯èƒ½ãªé †åº
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®é‡å¤§ãªè„†å¼±æ€§
- æ ¹æœ¬åŸå› åˆ†æãªã—ã«ç—‡çŠ¶çš„ä¿®æ­£ã‚’ææ¡ˆ
- ãƒ‡ãƒ¼ã‚¿æå¤±ã®ãƒªã‚¹ã‚¯ãŒã‚ã‚‹è¨­è¨ˆ

**é‡è¦**: æ±ºå®šçš„ãªæ¬ è½ãŒã‚ã‚‹çŠ¶æ…‹ã§ã¯ã€çµ¶å¯¾ã«å®Ÿè£…ã‚’é–‹å§‹ã—ãªã„ã§ãã ã•ã„ã€‚

## åŠ¹ç‡åŒ–ã®ãƒ’ãƒ³ãƒˆ

### ä¸¦åˆ—å®Ÿè¡Œ

logic-validatorã¨å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€åŒä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…ã§é †åºç«‹ã¦ã¦å®Ÿè¡Œå¯èƒ½ï¼š

```typescript
// 1ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§è¤‡æ•°Taskã‚’å‘¼ã³å‡ºã—
Task({
  subagent_type: "logic-validator",
  description: "Validate plan logic",
  prompt: "..."
})

// ç¶šã‘ã¦å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå¿…è¦ãªå ´åˆï¼‰
/codex-review
```

### æ®µéšçš„æ¤œè¨¼

è¨ˆç”»ã®è¤‡é›‘ã•ã«å¿œã˜ã¦æ¤œè¨¼ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠï¼š

- **ã‚·ãƒ³ãƒ—ãƒ«**: logic-validator ã®ã¿
- **ä¸­ç¨‹åº¦**: logic-validator + codex-review
- **è¤‡é›‘**: logic-validator + self-review + codex-review-mcp

## å®Ÿè£…ä¾‹

### ã‚·ãƒŠãƒªã‚ª: JWTèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…è¨ˆç”»æ¤œè¨¼

```markdown
# 1. è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -lt ~/.claude/plans/*.md | head -1
# å‡ºåŠ›: ~/.claude/plans/jwt-auth-plan.md

Read({ file_path: "~/.claude/plans/jwt-auth-plan.md" })

# 2. è«–ç†æ¤œè¨¼
Task({
  subagent_type: "logic-validator",
  description: "Validate JWT auth plan",
  prompt: `
# JWTèªè¨¼å®Ÿè£…è¨ˆç”»ã®æ¤œè¨¼

[è¨ˆç”»å†…å®¹]

## æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ
1. JWTç”Ÿæˆãƒ»æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã®å®Œå…¨æ€§
2. ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜ãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æˆ¦ç•¥
3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¶²ç¾…æ€§
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®è€ƒæ…®
5. ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—ã®å¦¥å½“æ€§
`
})

# 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦–ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆèªè¨¼ãªã®ã§é‡è¦ï¼‰
/codex-review

ã€ŒJWTãƒ™ãƒ¼ã‚¹ã®èªè¨¼å®Ÿè£…è¨ˆç”»ã«ã¤ã„ã¦ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ã€‚
ç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š
- ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¿å­˜æ–¹æ³•ï¼ˆhttpOnly cookie vs localStorageï¼‰
- ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³æˆ¦ç•¥
- XSS/CSRFå¯¾ç­–
- ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™è¨­å®š

[è¨ˆç”»ã®è¦ç´„]ã€

# 4. é‡å¤§ãªæŒ‡æ‘˜ãŒã‚ã‚Œã°è¨ˆç”»ã‚’æ”¹å–„
# ï¼ˆä¾‹ï¼šCSRFå¯¾ç­–ãŒä¸è¶³ã—ã¦ã„ãŸå ´åˆï¼‰
Edit({
  file_path: "~/.claude/plans/jwt-auth-plan.md",
  old_string: "ã‚¹ãƒ†ãƒƒãƒ—5: JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦è¿”ã™",
  new_string: `ã‚¹ãƒ†ãƒƒãƒ—5: JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ
- ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆã«ã¯RS256ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨
- httpOnly, secure, sameSite=strict cookieã¨ã—ã¦è¨­å®š
- CSRFå¯¾ç­–: ãƒ€ãƒ–ãƒ«ã‚µãƒ–ãƒŸãƒƒãƒˆã‚¯ãƒƒã‚­ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…
- æ¤œè¨¼: ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆå¾Œã€ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦å†…å®¹ç¢ºèª`
})

# 5. å•é¡Œãªã—ã¨åˆ¤å®šã•ã‚ŒãŸã‚‰å®Ÿè£…é–‹å§‹
# ï¼ˆè¨ˆç”»ã¯ã™ã§ã« ~/.claude/plans/ ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ï¼‰
```

## Validation Checklist

è©³ç´°ãªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¯ [validation-checklist.md](validation-checklist.md) ã‚’å‚ç…§ã€‚

**æœ€é‡è¦é …ç›®:**

### è«–ç†çš„æ•´åˆæ€§
- [ ] å„ã‚¹ãƒ†ãƒƒãƒ—ã®ç›®çš„ãŒæ˜ç¢º
- [ ] ã‚¹ãƒ†ãƒƒãƒ—é–“ã®ä¾å­˜é–¢ä¿‚ãŒæ­£ã—ã„
- [ ] æ¤œè¨¼ãªã—ã®æˆåŠŸä»®å®šãŒãªã„

### å®Œå…¨æ€§
- [ ] å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚ŠãŒå«ã¾ã‚Œã‚‹
- [ ] ãƒ†ã‚¹ãƒˆãƒ»ãƒ“ãƒ«ãƒ‰ç¢ºèªãŒå«ã¾ã‚Œã‚‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹

### å®Ÿè¡Œå¯èƒ½æ€§
- [ ] å„ã‚¹ãƒ†ãƒƒãƒ—ãŒå…·ä½“çš„
- [ ] å¿…è¦ãªãƒ„ãƒ¼ãƒ«ãƒ»ã‚³ãƒãƒ³ãƒ‰ãŒæ˜è¨˜
- [ ] å®Ÿè£…é †åºãŒè«–ç†çš„

## Anti-Patterns

| Anti-Pattern | å•é¡Œ | å¯¾ç­– |
|--------------|------|------|
| å½¢å¼çš„æ¤œè¨¼ | ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãŸãŒä½•ã‚‚è€ƒãˆãªã„ | å®Ÿéš›ã«æ”¹å–„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‹ |
| éå‰°æ¤œè¨¼ | å˜ç´”è¨ˆç”»ã§è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹• | è¤‡é›‘ã•ã«å¿œã˜ã¦é¸æŠ |
| æŒ‡æ‘˜ç„¡è¦– | é‡å¤§ãªæŒ‡æ‘˜ã‚’ç„¡è¦– | è«–ç†çš„çŸ›ç›¾ã¯å¿…ãšè§£æ±º |
| ã‚¹ã‚³ãƒ¼ãƒ—æ‹¡å¤§ | ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è¿½åŠ æ©Ÿèƒ½ã‚’ç››ã‚Šè¾¼ã‚€ | å…ƒã®ã‚¿ã‚¹ã‚¯ã«é›†ä¸­ |
| ç„¡é™ãƒ«ãƒ¼ãƒ— | ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’ä¿®æ­£â†’ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¹°ã‚Šè¿”ã— | 2å›ã¾ã§ |

## Troubleshooting

è©³ç´°ã¯ [troubleshooting.md](troubleshooting.md) ã‚’å‚ç…§ã€‚

**ã‚ˆãã‚ã‚‹å•é¡Œ:**

### è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# è¤‡æ•°ã®å ´æ‰€ã‚’ç¢ºèª
ls -lt ~/.claude/plans/*.md 2>/dev/null
ls -lt .claude/plans/*.md 2>/dev/null
```

Plan Modeã§è¨ˆç”»ã‚’ä¿å­˜ã—ã¦ã„ãªã‹ã£ãŸå ´åˆã€ä¼šè©±å±¥æ­´ã‹ã‚‰è¨ˆç”»ã‚’æŠ½å‡ºã—ã¦æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã€‚

### logic-validatorãŒèµ·å‹•ã—ãªã„

```typescript
// âŒ Wrong subagent_type
Task({ subagent_type: "logic-validation", ... })

// âœ… Correct
Task({ subagent_type: "logic-validator", ... })
```

### ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœãŒçŸ›ç›¾

å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å°‚é–€æ€§ã‚’è€ƒæ…®ï¼š
- logic-validator: è«–ç†æ•´åˆæ€§ã€è¨¼æ‹ ã®æœ‰ç„¡
- codex-review: å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€è¨­è¨ˆåˆ¤æ–­
- self-review: å¤šè§’çš„è¦–ç‚¹ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€UI/UXç­‰ï¼‰

æœ€çµ‚åˆ¤æ–­ã¯è‡ªåˆ†ã§è¡Œã†ã€‚

## Related Resources

- [validation-checklist.md](validation-checklist.md): è©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [troubleshooting.md](troubleshooting.md): ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è©³ç´°
- `~/.claude/rules/external-review.md`: å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- `/logic-validation` skill: è«–ç†çš„æ•´åˆæ€§æ¤œè¨¼
- `/codex-review` skill: å¤–éƒ¨è¦–ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼
- `/self-review` skill: å¤šé¢çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼

## Quick Reference

```bash
# åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆPlan Modeçµ‚äº†å¾Œï¼‰
1. è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª: ls -lt ~/.claude/plans/*.md
2. èª­ã¿å–ã‚Š: Read({ file_path: "~/.claude/plans/plan.md" })
3. è«–ç†æ¤œè¨¼: Task(logic-validator)
4. å¤–éƒ¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå¿…è¦ãªã‚‰ï¼‰: /codex-review
5. åˆ¤å®š:
   - ğŸš« æ±ºå®šçš„ãªæ¬ è½ â†’ å®Ÿè£…åœæ­¢ã€è¨ˆç”»å†ä½œæˆ
   - âš ï¸ ä¸­ç¨‹åº¦ â†’ æ”¹å–„: Edit({ ... }) â†’ å†æ¤œè¨¼ï¼ˆæœ€å¤§2å›ï¼‰
   - âœ… å•é¡Œãªã— â†’ 6ã¸
6. å®Ÿè£…é–‹å§‹

# æ¤œè¨¼ãƒ¬ãƒ™ãƒ«ã®é¸æŠ
- Simple plan â†’ logic-validator ã®ã¿
- Medium complexity â†’ + codex-review
- Complex/security-critical â†’ + self-review

# é‡è¦åŸå‰‡
æ±ºå®šçš„ãªæ¬ è½ãŒã‚ã‚‹çŠ¶æ…‹ã§ã¯ã€çµ¶å¯¾ã«å®Ÿè£…ã‚’é–‹å§‹ã—ãªã„
```
